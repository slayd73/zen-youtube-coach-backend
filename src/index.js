// =====================================================================//  ðŸš€ src/index.js â€” Zen YouTube Coach Pro (Ultra-Premium Edition)//  Backend Entry Point: routing, middlewares, logging, error handling// =====================================================================import express from "express";import cors from "cors";import dotenv from "dotenv";dotenv.config();// -----------------------------//  Import Router Modules// -----------------------------import healthRouter from "./routes/health.js";import transcriptRouter from "./routes/transcript.js";import analyzeRouter from "./routes/analyze.js";import analyzerProRouter from "./routes/analyzer-pro.js";import compareTranscriptRouter from "./routes/compare-transcript.js";import compareVideosRouter from "./routes/compare-videos.js";import trendDeepSearchRouter from "./routes/trend-deepsearch.js";import outlierEngineRouter from "./routes/outlier-engine.js";// -----------------------------//  App Setup// -----------------------------const app = express();const PORT = process.env.PORT || 4000;const NODE_ENV = process.env.NODE_ENV || "development";// -----------------------------//  Global Middlewares// -----------------------------app.use(  cors({    origin: "*",    methods: ["GET", "POST", "OPTIONS"],    allowedHeaders: ["Content-Type", "Authorization"],  }));app.use(express.json({ limit: "5mb" }));// ðŸ” Logger avanzatoapp.use((req, res, next) => {  console.log(    `[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`  );  next();});// -----------------------------//  Root Endpoint// -----------------------------app.get("/", (req, res) => {  res.json({    status: "OK",    timestamp: new Date().toISOString(),    uptime_seconds: process.uptime(),    app: "Zen YouTube Coach Pro",    version: "Ultra-Premium 2025",    environment: NODE_ENV,    node: process.version,  });});// -----------------------------//  Mount Primary Routers// -----------------------------app.use("/health", healthRouter);                     // ðŸ©º Health Checkapp.use("/transcript", transcriptRouter);             // ðŸŽ§ Transcript Engineapp.use("/analyze", analyzeRouter);                   // ðŸ§  Analyze Classicapp.use("/analyzer-pro", analyzerProRouter);          // ðŸ§  Analyzer Proapp.use("/compare-transcript", compareTranscriptRouter); // ðŸŽ­ Compare Transcriptapp.use("/compare-videos", compareVideosRouter);      // ðŸŽ¬ Compare Video Assetsapp.use("/trend-deepsearch", trendDeepSearchRouter);  // ðŸ” Trend Intelligence DeepSearch// ðŸ”¥ NEW â€” OUTLIER ANALYZER ULTRA PREMIUMapp.use("/outlier-engine", outlierEngineRouter);// -----------------------------//  404 Handler// -----------------------------app.use((req, res) => {  res.status(404).json({    error: true,    message: `Endpoint non trovato: ${req.originalUrl}`,  });});// -----------------------------//  Global Error Handler// -----------------------------app.use((err, req, res, next) => {  console.error("ðŸ”¥ Errore Interno Server:", err);  res.status(500).json({    error: true,    message: "Errore interno del server",    details: NODE_ENV === "development" ? err.message : undefined,  });});// -----------------------------//  Start Server// -----------------------------app.listen(PORT, () => {  console.log(`ðŸŸ¢ Zen YouTube Coach Pro attivo su http://localhost:${PORT}`);});export default app;