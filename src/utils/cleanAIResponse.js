// ===================================================================// üßº cleanAIResponse.js ‚Äî Rimuove ```json, markdown e converte in JSON valido// ===================================================================export function cleanAIResponse(raw) {  try {    if (!raw) return null;    // Rimuove blocchi ```json o ```    raw = raw.replace(/```json|```/g, "").trim();    // Trova prima e ultima graffa    const first = raw.indexOf("{");    const last = raw.lastIndexOf("}");    if (first === -1 || last === -1) {      console.warn("‚ö† Nessun JSON valido trovato, restituisco testo grezzo.");      return { raw };    }    const jsonString = raw.substring(first, last + 1);    return JSON.parse(jsonString);  } catch (error) {    console.error("‚ùå Errore pulizia JSON:", error, "RAW:", raw);    return { raw };  }}