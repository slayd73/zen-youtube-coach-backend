// ============================================================// ⏱️ wordDuration.js — calcolo parole e durata stimata// ============================================================export function countWords(text = "") {  if (typeof text !== "string") return 0;  const cleaned = text.trim();  if (!cleaned) return 0;  return cleaned.split(/\s+/).length;}export function formatDuration(seconds) {  const total = Math.max(0, Math.round(seconds));  const m = Math.floor(total / 60);  const s = total % 60;  const ss = s.toString().padStart(2, "0");  return `${m}:${ss}`;}export function estimateSceneDurations(scenes, wpm = 145) {  if (!Array.isArray(scenes)) {    return {      scenesWithTime: [],      totalWords: 0,      totalDurationSec: 0,      totalDurationFormatted: "0:00",    };  }  const wordsPerSecond = wpm / 60;  let totalWords = 0;  let totalDurationSec = 0;  const scenesWithTime = scenes.map((scene) => {    const text = typeof scene.text === "string" ? scene.text : String(scene.text ?? "");    const wordCount = countWords(text);    const durationSec = wordCount / wordsPerSecond;    totalWords += wordCount;    totalDurationSec += durationSec;    return {      ...scene,      wordCount,      estimatedDurationSec: Math.round(durationSec),      estimatedDurationFormatted: formatDuration(durationSec),    };  });  return {    scenesWithTime,    totalWords,    totalDurationSec: Math.round(totalDurationSec),    totalDurationFormatted: formatDuration(totalDurationSec),  };}