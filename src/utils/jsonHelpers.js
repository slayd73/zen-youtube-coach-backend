// ============================================================// üß† jsonHelpers.js ‚Äî estrazione e parse sicuro JSON da risposta AI// ============================================================export function extractJsonObject(raw) {  try {    if (typeof raw !== "string") return null;    const first = raw.indexOf("{");    const last = raw.lastIndexOf("}");    if (first === -1 || last === -1) return null;    return raw.substring(first, last + 1);  } catch {    return null;  }}export function safeParseJson(raw) {  try {    if (!raw) return null;    if (typeof raw === "object") {      return raw;    }    const objSlice = extractJsonObject(raw);    if (objSlice) {      return JSON.parse(objSlice);    }    return JSON.parse(raw);  } catch (err) {    console.error("‚ùå safeParseJson error:", err);    return null;  }}