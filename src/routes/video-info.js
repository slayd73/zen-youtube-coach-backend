// ======================================================// ğŸ¥ /video-info â€” Zen YouTube Coach Pro (2025)// Estrae TUTTE le informazioni del video YouTube// Usando videoInfoService ENTERPRISE// ======================================================import express from "express";import { getVideoInfo } from "../services/videoInfoService.js";const router = express.Router();/** * Estrae ID video da una URL YouTube */function extractVideoId(videoUrl) {  if (!videoUrl || typeof videoUrl !== "string") return null;  // https://www.youtube.com/watch?v=XXXXXXXXXXX  let match = videoUrl.match(/v=([a-zA-Z0-9_-]{11})/);  if (match) return match[1];  // https://youtu.be/XXXXXXXXXXX  match = videoUrl.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);  if (match) return match[1];  // https://www.youtube.com/embed/XXXXXXXXXXX  match = videoUrl.match(/embed\/([a-zA-Z0-9_-]{11})/);  if (match) return match[1];  return null;}/** * POST /video-info * Body: * { *   "videoUrl": "https://youtu.be/XXXXXXXXXXX" * } */router.post("/", async (req, res) => {  try {    const { videoUrl } = req.body || {};    // ----------------------------    // ğŸŸ¥ Validazione    // ----------------------------    if (!videoUrl) {      return res.status(400).json({        ok: false,        error: "Missing 'videoUrl' field"      });    }    const videoId = extractVideoId(videoUrl);    if (!videoId) {      return res.status(400).json({        ok: false,        error: "Invalid YouTube URL format"      });    }    // ----------------------------    // ğŸ¥ Estrarre info     // ----------------------------    const result = await getVideoInfo(videoId);    if (!result.ok) {      return res.status(500).json({        ok: false,        videoId,        error: result.error || "Unable to fetch video info"      });    }    // ----------------------------    // ğŸŸ© Risposta finale    // ----------------------------    return res.json({      ok: true,      videoId,      data: result.data    });  } catch (err) {    console.error("âŒ /video-info ERROR:", err);    res.status(500).json({      ok: false,      error: "video-info route crashed",      details: err.message    });  }});export default router;