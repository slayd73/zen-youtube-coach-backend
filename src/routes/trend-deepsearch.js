// ======================================================// üîé /trend-deepsearch ‚Äî ULTRA PREMIUM VERSION 2025// Trend + Competitor Mapping + Keywords AI Engine 3.0// ======================================================import express from "express";import { callAIModel } from "../services/aiEngine.js";const router = express.Router();router.post("/", async (req, res) => {  try {    const {      niche = "salute e benessere",      audience = "over60",      forceProvider = "auto"    } = req.body || {};    const prompt = `Sei un motore di analisi trend simile a YouTube Trends, Google Trends e VidIQ Boost.Niche: ${niche}Pubblico: ${audience}Restituisci SOLO JSON:{  "trendEmergenti": [    {      "keyword": "...",      "crescita30giorni": "alta|media|bassa",      "percheStaEsplodendo": "...",      "vol": "alto|medio|basso"    }  ],  "mapCompetitor": [    {      "canale": "nome",      "tipoContenuti": "analisi|tutorial|storytelling",      "puntiForti": "...",      "debolezze": "...",      "opportunitaPerZen": "..."    }  ],  "gapDiMercato": [    {      "idea": "...",      "percheNonCoperte": "...",      "potenziale": "alto|medio|basso"    }  ],  "videoConsigliati": [    {      "titolo": "...",      "hook": "...",      "keyword": "...",      "motivoVirale": "..."    }  ]}`.trim();    const aiResp = await callAIModel(prompt, "json", {      task: "trend-deepsearch",      temperature: 0.25,      maxTokens: 5000,      forceProvider    });    if (aiResp?.error) {      return res.status(502).json({        ok: false,        error: "AI deepsearch failed",        details: aiResp      });    }    res.json({      ok: true,      providerUsed: forceProvider,      data: aiResp    });  } catch (err) {    console.error("‚ùå /trend-deepsearch ERROR:", err);    res.status(500).json({      ok: false,      error: "Trend-deepsearch route crashed",      details: err.message    });  }});export default router;