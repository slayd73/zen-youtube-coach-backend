// ======================================================// ðŸ§  /video-summary â€” Summary + Key Points// ======================================================import express from "express";import { callAIModel } from "../services/aiEngine.js";import { getTranscript } from "../services/transcriptService.js";const router = express.Router();router.post("/", async (req, res) => {  try {    const { videoUrl, forceProvider="auto" } = req.body;    const id = extract(videoUrl);    const tr = await getTranscript(id);    const prompt = `Riassumi questo video in bullet points.Transcript:${tr.continuousText}Rispondi SOLO JSON:{  "riassunto": ["..."],  "puntiChiave": ["..."],  "takeaway": "..."}`;    const out = await callAIModel(prompt, "json", {      task: "summary",      temperature: 0.2,      maxTokens: 3500,      forceProvider    });    res.json({ ok:true, data: out });  } catch (e) {    res.status(500).json({ ok:false, error:e.message });  }})function extract(u){  let m=u.match(/v=([\w-]{11})/); if(m) return m[1];  m=u.match(/youtu\.be\/([\w-]{11})/); if(m) return m[1];  return null;}export default router;