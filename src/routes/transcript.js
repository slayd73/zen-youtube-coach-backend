// ======================================================================// üìò /transcript ‚Äî Endpoint Transcript (AI Premium Version B)// ======================================================================import express from "express";import {  getTranscript,  processManualTranscript} from "../services/transcriptService.js";const router = express.Router();// -----------------------------------------------------// GET /transcript?videoIdOrUrl=// -----------------------------------------------------router.get("/", async (req, res) => {  try {    const { videoId, url, videoIdOrUrl } = req.query || {};    const target = videoIdOrUrl || url || videoId;    if (!target) {      return res.status(400).json({        success: false,        message:          "Devi passare ?videoId= oppure ?url= oppure ?videoIdOrUrl=."      });    }    const result = await getTranscript(target);    return res.json(result);  } catch (err) {    console.error("‚ùå /transcript GET ERROR:", err);    return res.status(500).json({      success: false,      message: "Errore interno /transcript GET."    });  }});// -----------------------------------------------------// POST /transcript (YouTube URL)// -----------------------------------------------------router.post("/", async (req, res) => {  try {    const { videoIdOrUrl, videoId, url } = req.body || {};    const target = videoIdOrUrl || url || videoId;    if (!target) {      return res.status(400).json({        success: false,        message:          "Body mancante: serve videoIdOrUrl o videoId o url."      });    }    const result = await getTranscript(target);    return res.json(result);  } catch (err) {    console.error("‚ùå /transcript POST ERROR:", err);    return res.status(500).json({      success: false,      message: "Errore interno /transcript POST."    });  }});// -----------------------------------------------------// POST /transcript/manual// -----------------------------------------------------router.post("/manual", async (req, res) => {  try {    const { transcriptText } = req.body || {};    if (!transcriptText || !String(transcriptText).trim()) {      return res.status(400).json({        success: false,        message: "Devi passare transcriptText non vuoto."      });    }    const result = await processManualTranscript(transcriptText);    return res.json(result);  } catch (err) {    console.error("‚ùå /transcript/manual ERROR:", err);    return res.status(500).json({      success: false,      message: "Errore interno /transcript/manual."    });  }});export default router;