// ======================================================// ðŸ“‰ /retention-analyze â€” Retention AI MASTER// ======================================================import express from "express";import { callAIModel } from "../services/aiEngine.js";const router = express.Router();router.post("/", async (req, res) => {  try {    const {      transcript,      audience = "over60",      forceProvider = "auto"    } = req.body;    if (!transcript) return res.status(400).json({ ok: false, error: "Missing transcript" });    const prompt = `Analizza questo transcript per individuare i punti di drop-off.Genera SOLO JSON:{  "puntiCritici": [    {      "timestampStimato": "0:30",      "problema": "...",      "rimedio": "..."    }  ],  "momentiForti": ["..."],  "riscrittureSuggerite": ["..."]}Transcript:${transcript}`;    const aiResp = await callAIModel(prompt, "json", {      task: "retention",      temperature: 0.3,      maxTokens: 4000,      forceProvider    });    res.json({ ok: true, data: aiResp });  } catch (err) {    res.status(500).json({ ok: false, error: err.message });  }});export default router;